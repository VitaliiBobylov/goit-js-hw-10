{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nclass CountdownTimer {\n  constructor({ dateInputSelector, startBtnSelector, outputSelectors }) {\n    this.dateInput = document.querySelector(dateInputSelector);\n    this.startBtn = document.querySelector(startBtnSelector);\n    this.outputEls = {\n      days: document.querySelector(outputSelectors.days),\n      hours: document.querySelector(outputSelectors.hours),\n      minutes: document.querySelector(outputSelectors.minutes),\n      seconds: document.querySelector(outputSelectors.seconds),\n    };\n\n    this.targetDate = null;\n    this.intervalId = null;\n    this.init();\n  }\n\n  init() {\n    this.startBtn.disabled = true;\n\n    this.startBtn.addEventListener('click', this.start.bind(this));\n\n    flatpickr(this.dateInput, {\n      enableTime: true,\n      time_24hr: true,\n      defaultDate: new Date(),\n      minuteIncrement: 1,\n      onClose: this.handleDateSelect.bind(this),\n    });\n  }\n\n  handleDateSelect(selectedDates) {\n\n    const selected = selectedDates[0];\n    const now = new Date();\n\n    if (selected <= now) {\n      iziToast.error({\n        title: 'Error',\n        message: '\"Please choose a date in the future\"',\n        position: 'topRight',\n      });\n\n      this.startBtn.disabled = true;\n      return;\n    }\n\n    this.targetDate = selected;\n    this.startBtn.disabled = false;\n  }\n\n  start() {\n\n    if (!this.targetDate) return;\n\n      this.startBtn.disabled = true;\n\n  this.dateInput.disabled = true;\n\n\n  \n    clearInterval(this.intervalId);\n\n    this.intervalId = setInterval(() => {\n\n      const now = new Date();\n\n      const diff = this.targetDate - now;\n\n      if (diff <= 0) {\n        clearInterval(this.intervalId);\n\n        this.updateDisplay({ days: 0, hours: 0, minutes: 0, seconds: 0 });\n\nthis.startBtn.disabled = true;\nthis.dateInput.disabled = false;\n\n        iziToast.success({\n          title: 'Timer',\n          message: 'Countdown finished!',\n          position: 'topRight',\n        });\n        return;\n      }\n\n\n      const time = this.convertMs(diff);\n      this.updateDisplay(time);\n    }, 1000);\n  }\n\n  updateDisplay({ days, hours, minutes, seconds }) {\n    this.outputEls.days.textContent = String(days).padStart(2, '0');\n    this.outputEls.hours.textContent = String(hours).padStart(2, '0');\n    this.outputEls.minutes.textContent = String(minutes).padStart(2, '0');\n    this.outputEls.seconds.textContent = String(seconds).padStart(2, '0');\n  }\n\n  convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n    return { days, hours, minutes, seconds };\n  }\n}\n\nnew CountdownTimer({\n  dateInputSelector: '#datetime-picker',\n  startBtnSelector: '[data-start]',\n  outputSelectors: {\n    days: '[data-days]',\n    hours: '[data-hours]',\n    minutes: '[data-minutes]',\n    seconds: '[data-seconds]',\n  },\n});\n"],"names":["CountdownTimer","dateInputSelector","startBtnSelector","outputSelectors","flatpickr","selectedDates","selected","iziToast","now","diff","time","days","hours","minutes","seconds","ms"],"mappings":"2FAMA,MAAMA,CAAe,CACnB,YAAY,CAAE,kBAAAC,EAAmB,iBAAAC,EAAkB,gBAAAC,CAAe,EAAI,CACpE,KAAK,UAAY,SAAS,cAAcF,CAAiB,EACzD,KAAK,SAAW,SAAS,cAAcC,CAAgB,EACvD,KAAK,UAAY,CACf,KAAM,SAAS,cAAcC,EAAgB,IAAI,EACjD,MAAO,SAAS,cAAcA,EAAgB,KAAK,EACnD,QAAS,SAAS,cAAcA,EAAgB,OAAO,EACvD,QAAS,SAAS,cAAcA,EAAgB,OAAO,CAC7D,EAEI,KAAK,WAAa,KAClB,KAAK,WAAa,KAClB,KAAK,KAAI,CACV,CAED,MAAO,CACL,KAAK,SAAS,SAAW,GAEzB,KAAK,SAAS,iBAAiB,QAAS,KAAK,MAAM,KAAK,IAAI,CAAC,EAE7DC,EAAU,KAAK,UAAW,CACxB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAS,KAAK,iBAAiB,KAAK,IAAI,CAC9C,CAAK,CACF,CAED,iBAAiBC,EAAe,CAE9B,MAAMC,EAAWD,EAAc,CAAC,EAGhC,GAAIC,GAFQ,IAAI,KAEK,CACnBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,uCACT,SAAU,UAClB,CAAO,EAED,KAAK,SAAS,SAAW,GACzB,MACD,CAED,KAAK,WAAaD,EAClB,KAAK,SAAS,SAAW,EAC1B,CAED,OAAQ,CAED,KAAK,aAER,KAAK,SAAS,SAAW,GAE7B,KAAK,UAAU,SAAW,GAIxB,cAAc,KAAK,UAAU,EAE7B,KAAK,WAAa,YAAY,IAAM,CAElC,MAAME,EAAM,IAAI,KAEVC,EAAO,KAAK,WAAaD,EAE/B,GAAIC,GAAQ,EAAG,CACb,cAAc,KAAK,UAAU,EAE7B,KAAK,cAAc,CAAE,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAG,CAAA,EAExE,KAAK,SAAS,SAAW,GACzB,KAAK,UAAU,SAAW,GAElBF,EAAS,QAAQ,CACf,MAAO,QACP,QAAS,sBACT,SAAU,UACpB,CAAS,EACD,MACD,CAGD,MAAMG,EAAO,KAAK,UAAUD,CAAI,EAChC,KAAK,cAAcC,CAAI,CACxB,EAAE,GAAI,EACR,CAED,cAAc,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC/C,KAAK,UAAU,KAAK,YAAc,OAAOH,CAAI,EAAE,SAAS,EAAG,GAAG,EAC9D,KAAK,UAAU,MAAM,YAAc,OAAOC,CAAK,EAAE,SAAS,EAAG,GAAG,EAChE,KAAK,UAAU,QAAQ,YAAc,OAAOC,CAAO,EAAE,SAAS,EAAG,GAAG,EACpE,KAAK,UAAU,QAAQ,YAAc,OAAOC,CAAO,EAAE,SAAS,EAAG,GAAG,CACrE,CAED,UAAUC,EAAI,CAMZ,MAAMJ,EAAO,KAAK,MAAMI,EAAK,KAAG,EAC1BH,EAAQ,KAAK,MAAOG,EAAK,MAAO,IAAI,EACpCF,EAAU,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,EACjDD,EAAU,KAAK,MAASC,EAAK,MAAO,KAAQ,IAAU,GAAM,EAClE,MAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CACH,CAEA,IAAId,EAAe,CACjB,kBAAmB,mBACnB,iBAAkB,eAClB,gBAAiB,CACf,KAAM,cACN,MAAO,eACP,QAAS,iBACT,QAAS,gBACV,CACH,CAAC"}